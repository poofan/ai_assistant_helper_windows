# YourSmartScreen API - OpenAPI Specification

## –û–±–∑–æ—Ä API
- **–í–µ—Ä—Å–∏—è**: 3.1.0
- **–ù–∞–∑–≤–∞–Ω–∏–µ**: YourSmartScreen API - OpenAI Responses
- **–û–ø–∏—Å–∞–Ω–∏–µ**: API —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã OpenAI responses
- **–í–µ—Ä—Å–∏—è**: 1.0.0

## –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **–¢–∏–ø**: HTTP Bearer Token (JWT)
- **–°—Ö–µ–º–∞**: `HTTPBearer`
- **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ**: –î–æ–±–∞–≤–ª—è—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Authorization: Bearer <token>`

## –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

#### POST `/auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `UserRegister`
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –£—Å–ø–µ—à–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - `422`: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### POST `/auth/login` - –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `UserLogin`
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `Token`)
  - `422`: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### GET `/auth/verify` - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω–∞
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer token
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –¢–æ–∫–µ–Ω –≤–∞–ª–∏–¥–µ–Ω

### üí¨ –ß–∞—Ç –∏ AI

#### POST `/openai/chat` - OpenAI —á–∞—Ç
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ OpenAI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π conversation
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer token
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `ChatMessage`
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (`ChatResponse`)
  - `422`: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### POST `/chat/send` - –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —á–∞—Ç
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π —á–∞—Ç - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ OpenAI —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π conversation
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer token
- **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞**: `ChatMessage`
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç (`ChatResponse`)
  - `422`: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### POST `/openrouter/image/analyze` - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —á–µ—Ä–µ–∑ OpenRouter
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer token
- **–¢–∏–ø –∫–æ–Ω—Ç–µ–Ω—Ç–∞**: `multipart/form-data`
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã**:
  - `file` (binary, required): –§–∞–π–ª –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
  - `prompt` (string, optional): –ü—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "–ß—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–æ –Ω–∞ —ç—Ç–æ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–∏?")
  - `model` (string, optional): –ú–æ–¥–µ–ª—å AI (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "openai/gpt-4.1-mini")
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –£—Å–ø–µ—à–Ω—ã–π –∞–Ω–∞–ª–∏–∑ (`ImageAnalysisResponse`)
  - `422`: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### üí≥ –ü–æ–¥–ø–∏—Å–∫–∏

#### GET `/subscription/info` - –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–¥–ø–∏—Å–∫–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer token
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ

#### GET `/subscription/plans` - –ü–ª–∞–Ω—ã –ø–æ–¥–ø–∏—Å–∫–∏
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –ø–ª–∞–Ω–æ–≤ –ø–æ–¥–ø–∏—Å–∫–∏
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –°–ø–∏—Å–æ–∫ –ø–ª–∞–Ω–æ–≤ –ø–æ–¥–ø–∏—Å–∫–∏

#### POST `/subscription/create` - –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –ø–æ–¥–ø–∏—Å–∫–∏
- **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –¢—Ä–µ–±—É–µ—Ç—Å—è Bearer token
- **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞**:
  - `plan_id` (string, required): ID –ø–ª–∞–Ω–∞ –ø–æ–¥–ø–∏—Å–∫–∏
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–¥–ø–∏—Å–∫–∏
  - `422`: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

### üîß –°–ª—É–∂–µ–±–Ω—ã–µ

#### GET `/` - –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ö–æ—Ä–Ω–µ–≤–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç API
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

#### GET `/health` - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è
- **–û–ø–∏—Å–∞–Ω–∏–µ**: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è API
- **–û—Ç–≤–µ—Ç—ã**:
  - `200`: API —Ä–∞–±–æ—Ç–∞–µ—Ç

## –°—Ö–µ–º—ã –¥–∞–Ω–Ω—ã—Ö

### UserRegister
```json
{
  "username": "string",
  "email": "string|null",
  "password": "string"
}
```

### UserLogin
```json
{
  "username": "string",
  "password": "string"
}
```

### Token
```json
{
  "access_token": "string",
  "token_type": "string",
  "expires_in": "integer"
}
```

### ChatMessage
```json
{
  "message": "string",
  "model": "string (default: gpt-4.1-mini)",
  "previous_response_id": "string|null"
}
```

### ChatResponse
```json
{
  "response": "string",
  "response_id": "string",
  "tokens_used": "integer|null",
  "model": "string"
}
```

### ImageAnalysisResponse
```json
{
  "analysis": "string",
  "model": "string",
  "tokens_used": "integer|null",
  "processing_time": "number|null"
}
```

### HTTPValidationError
```json
{
  "detail": [
    {
      "loc": ["string|integer"],
      "msg": "string",
      "type": "string"
    }
  ]
}
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```http
POST /auth/register
Content-Type: application/json

{
  "username": "testuser",
  "email": "test@example.com",
  "password": "password123"
}
```

### –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
```http
POST /auth/login
Content-Type: application/json

{
  "username": "testuser",
  "password": "password123"
}
```

### –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
```http
POST /chat/send
Authorization: Bearer <token>
Content-Type: application/json

{
  "message": "–ü—Ä–∏–≤–µ—Ç! –ö–∞–∫ –¥–µ–ª–∞?",
  "model": "gpt-4.1-mini"
}
```

### –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
```http
POST /openrouter/image/analyze
Authorization: Bearer <token>
Content-Type: multipart/form-data

file: <binary_image_data>
prompt: "–û–ø–∏—à–∏ —ç—Ç–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–¥—Ä–æ–±–Ω–æ"
model: "openai/gpt-4.1-mini"
```

## –ö–æ–¥—ã –æ—Ç–≤–µ—Ç–æ–≤

- **200**: –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å
- **422**: –û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö
- **401**: –ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –Ω–µ–≤–µ—Ä–Ω—ã–π —Ç–æ–∫–µ–Ω)
- **403**: –î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â–µ–Ω
- **500**: –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–ú–æ–¥–µ–ª–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**:
   - –ß–∞—Ç: `gpt-4.1-mini`
   - –ê–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π: `openai/gpt-4.1-mini`

2. **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ conversation**: –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã `/openai/chat` –∏ `/chat/send` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ –¥–∏–∞–ª–æ–≥–∞ —á–µ—Ä–µ–∑ `previous_response_id`

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –∫—Ä–æ–º–µ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –≤—Ö–æ–¥–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–ª–∞–Ω–æ–≤ —Ç—Ä–µ–±—É—é—Ç Bearer token

4. **–í–∞–ª–∏–¥–∞—Ü–∏—è**: –í—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ—Ö–æ–¥—è—Ç –≤–∞–ª–∏–¥–∞—Ü–∏—é, –æ—à–∏–±–∫–∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ `HTTPValidationError`